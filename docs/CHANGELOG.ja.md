🌐 [English](CHANGELOG.md) | [中文](CHANGELOG.zh.md) | [日本語](CHANGELOG.ja.md)

# AI-CLI 変更ログ

## v2.2.0 (2026-02-26)

### ✨ 新機能
- **ツリー構造管理**：プロジェクトがフォルダ分類とマルチレベル構成をサポート
  - フォルダとプロジェクトの 2 種類の作成をサポート
  - フォルダはプロジェクトとサブフォルダを含めることができます
  - パンくずリストナビゲーションで現在位置を表示
  - フォルダとすべての子アイテムを再帰的に削除
- **削除機能**：プロジェクトとフォルダの削除をサポート
  - 削除の確認に手動で名前を入力する必要があります
  - フォルダを削除するときに含まれる子アイテムの数を表示
  - 誤削除を防止するセーフティメカニズム
- **設定ファイルの分離**：設定ファイルをプログラムディレクトリからユーザー設定ディレクトリに移行
  - ユーザー設定：`%APPDATA%\AI-CLI\config.json`
  - デフォルト設定：プログラムディレクトリの `config.json`
  - 読み取り優先順位：ユーザー設定を優先、存在しない場合はデフォルト設定を読み取り
  - すべての変更はユーザー設定に保存
  - アンインストール時に設定は失われません
- **パラメータ互換性の強化**：`-` と `--` の両方のパラメータプレフィックスをサポート
  - 例：`-Init` と `--init` のどちらも使用可能
  - パラメータは大文字と小文字を区別しません
- **ヘルプ機能**：新しい `--help` パラメータ、サポートされているすべてのコマンドと説明を表示

### 🔄 改善
- インストール時にデフォルト設定をユーザーディレクトリに自動的にコピー
- アンインストール時にプログラムフォルダを完全にクリア
- 旧バージョンのフラット構成をツリー構造に自動的に移行
- UI 表示の最適化、アイコンを使用してフォルダとプロジェクトを区別

### 📚 ドキュメント更新
- 設定ファイルの場所と優先順位の説明を更新
- 設定の持続性の説明を追加
- パラメータプレフィックスの互換性の説明を追加
- ヘルプコマンドの使用法の説明を追加
- ツリー構造の使用法の説明を追加
- キーボードショートカットの説明を更新

---

## v2.1.1 (2026-02-26)

### 🐛 バグ修正
- 環境変数の型変換エラーを修正：PSCustomObject を正しく Hashtable に変換
- アンインストール機能を改善：デスクトップショートカットの削除と PATH 環境変数のクリーンアップを追加
- ドキュメントのアンインストールコマンド構文を修正（`--uninstall` → `-Uninstall`）

### 🔄 UI 改善
- 新規プロジェクト画面を最適化：
  - プロジェクト名はプレースホルダーを表示せず、手動入力が必要
  - プロジェクトパスはプレースホルダーを表示せず、空の場合は自動的に現在のディレクトリを使用
  - 空のプレースホルダーのときに空の括弧を表示しない

### 📚 ドキュメント更新
- アンインストールコマンドの構文説明を修正
- 補足説明：PowerShell パラメータは大文字と小文字を区別しません（`-uninstall`、`-Uninstall`、`-UNINSTALL` などをサポート）

---

## v2.1.0 (2026-02-26)

### ✨ 新機能
- **プロジェクト追加機能**：プロジェクト選択画面で `N` キーを押すと新規プロジェクトを直接追加可能
  - プロジェクト名の入力をサポート（必須、重複を自動検出）
  - プロジェクトパスの入力をサポート（必須、パスの存在を自動検出、作成可能）
  - 環境変数設定をサポート（オプション、KEY=VALUE 形式）
  - 完全な入力検証とユーザーエクスペリエンスの最適化
- **環境変数インジェクション**：AI CLI ツールの起動時にプロジェクト構成の環境変数を自動的にインジェクト
  - **スマートパス変換**：WSL 環境で Windows パス形式の環境変数値を WSL パス形式に自動的に変換

### 🔄 UI 改善
- プロジェクト選択画面からインストールツール機能（`I` キー）を削除、インタラクションを簡素化
- メニュープロンプトテキストを最適化、インターフェイスタイプに応じて異なるキーボードショートカットヒントを表示
- 新規プロジェクト追加時にプロジェクトパスが空の場合、自動的に現在のディレクトリを使用

### 📚 ドキュメント更新
- README.md を更新、新規プロジェクト画面の説明と環境変数設定の例を追加
- キーボードショートカットの説明を更新、最新のインタラクションロジックを反映
- スマートパス変換機能の説明を追加

---

## v2.0.1 (2026-02-26)

### 🐛 バグ修正
- `install.ps1` デスクトップショートカット作成エラーを修正
  - `.bat` ファイルのコンテンツを PowerShell 形式から正しいバッチ形式に変更
  - ショートカットは中間の `.bat` ファイルではなく `ai-cli.ps1` を直接指す
  - カスタムアイコンのサポートを追加（`ai-cli.ico`）
- README.md のインストール説明を更新

---

## v2.0.0 (2026-02-26)

### 🎉 メジャーアップデート

#### 新機能
- ✅ **純粋なターミナルインタフェース**：WinForms に代わり、高速なキーボード駆動の CLI インタフェースを提供
- ✅ **ループ起動モード**：プログラムは終了せず、ツールとプロジェクトの連続選択をサポート
- ✅ **マルチタブサポート**：Ctrl+Enter で Windows Terminal の新しいタブでツールを起動
- ✅ **ツールインストール機能**：I キーを押して未インストールの AI CLI ツールをすばやくインストール
- ✅ **統一設定管理**：config.json ですべての設定（プロジェクト、ツール、設定）を管理
- ✅ **8 つの主要ツールを事前設定**：すぐに使用できるツール設定

#### コア修正
- 🐛 **WSL ツール検出**：`bash -ic` を使用して `bash -lc` の代わりに.bashrc 環境変数を正しく読み込む
- 🐛 **WSL 起動クラッシュ**：単一文字列パラメータ方式を採用し、ArgumentList 配列の問題を解決
- 🐛 **Show-Menu 戻り値**：余分な return 文を削除し、配列の戻りを回避

#### パフォーマンス改善
- ⚡ **起動速度の向上**：GUI 読み込み遅延なし、即時応答
- 🎨 **より良いキーボードナビゲーション**：↑↓ 選択、Enter 確認、Esc 戻る、I インストール
- 📚 **完全なドキュメントシステム**：README、TOOLS、INSTALL-GUIDE、BUGFIX

### サポートされている AI CLI ツール

| ツール | 開発元 | Windows | WSL/Linux |
|------|--------|---------|-----------|
| Kiro CLI | AWS | ❌ | ✅ |
| Claude Code | Anthropic | ✅ | ✅ |
| OpenAI Codex | OpenAI | ✅ | ✅ |
| Kimi CLI | Moonshot AI | ✅ | ✅ |
| Gemini CLI | Google | ✅ | ✅ |
| Cursor Agent | Cursor | ❌ | ✅ |
| OpenCode | オープンソース | ✅ | ✅ |
| Aider | オープンソース | ✅ | ✅ |

### キーボードショートカット

#### ツール選択画面
- `↑↓` - ナビゲーション選択
- `Enter` - 新しいウィンドウでツールを起動
- `Ctrl+Enter` - 新しいタブでツールを起動（Windows Terminal が必要）
- `I` - 新しいツールをインストール
- `Esc` - プロジェクト選択に戻る
- `Q` - プログラムを終了

#### プロジェクト選択画面
- `↑↓` - ナビゲーション選択
- `Enter` - プロジェクトを選択
- `Q` - プログラムを終了

### 技術アーキテクチャ

```
メインループ
├── プロジェクト選択ループ
│   └── ツール選択ループ
│       ├── Windows Terminal の検出
│       ├── プロンプトの表示（条件付き）
│       ├── セッションの起動（通常/マルチタブ）
│       ├── ツールのインストール（I キーを押す）
│       └── 親に戻る（Esc キーを押す）
```

### インストール方法

#### クイックインストール
```powershell
irm https://raw.githubusercontent.com/hyfhot/AI-CLI/master/install.ps1 | iex
```

#### マニュアルインストール
```powershell
# プロジェクトをダウンロード
git clone https://github.com/hyfhot/AI-CLI.git
cd AI-CLI

# 設定を初期化
.\ai-cli.ps1 -Init

# 実行
.\ai-cli.ps1
```

### 設定ファイル

#### config.json 構造
```json
{
  "projects": [
    {
      "name": "プロジェクト名",
      "path": "プロジェクトパス",
      "description": "プロジェクトの説明"
    }
  ],
  "tools": [
    {
      "name": "ツールコマンド",
      "displayName": "表示名",
      "winInstall": "Windows インストールコマンド",
      "wslInstall": "WSL インストールコマンド",
      "checkCommand": "検出コマンド",
      "url": "公式ウェブサイト"
    }
  ],
  "settings": {
    "language": "auto",
    "defaultEnv": "wsl",
    "terminalEmulator": "default"
  }
}
```

### ドキュメント

- **README.md** - 完全な使用説明と機能紹介
- **TOOLS.md** - 8 つの AI CLI ツールの詳細リファレンスマニュアル
- **INSTALL-GUIDE.md** - ツールインストール機能の使用ガイド
- **BUGFIX.md** - バグ修正記録と技術詳細
- **CHANGELOG.md** - このドキュメント、バージョン変更ログ

---

## v1.x (歴史バージョン)

### 機能
- ✅ WinForms GUI
- ✅ 環境変数設定（AI_PROJECTS）
- ✅ 基本的なツール検出と起動
- ✅ Windows/WSL デュアル環境サポート
- ✅ 動的タブ命名

### 制限
- ❌ 起動速度が遅い（GUI 読み込み）
- ❌ 起動後にプログラムが終了
- ❌ マルチタブをサポートしていない
- ❌ ツールインストール機能がない
- ❌ 設定が分散（環境変数 + JSON）

### v2.0 への移行

v1.x ユーザーは手動移行の必要はありません、v2.0 は自動的に：
1. `AI_PROJECTS` 環境変数を読み取る
2. `config.json` を生成
3. すべてのプロジェクト設定を保持

---

## 将来の計画

### v2.1 (計画中)
- [ ] プロジェクト管理：プロジェクトの追加/編集/削除
- [ ] ツール管理：ツールの追加/編集/削除
- [ ] 設定のインポート/エクスポート
- [ ] ツール使用統計

### v2.2 (計画中)
- [ ] リモートプロジェクトサポート（SSH）
- [ ] Docker コンテナサポート
- [ ] カスタム起動スクリプト
- [ ] ワークスペーステンプレート

---

*最終更新日：2026-02-26*
